global
        log 127.0.0.1 local0
        maxconn 2048
        user haproxy
        group haproxy
        daemon

defaults
        log global
        timeout connect 10s
        timeout client 1m
        timeout server 1m
        default-server init-addr libc,none

listen website
        mode http
        bind :80
        bind :443 ssl crt /etc/haproxy/celestial.moe.pem
        http-request redirect scheme https code 301 unless { ssl_fc }
        server website celestial-homelab-scarameow:80

listen files
        mode http
        bind :5001 ssl crt /etc/haproxy/celestial.moe.pem
        server files celestial-homelab-scarameow:5001

listen mc
        mode tcp
        bind :25566
        server mc celestial-pc-windows:25565

listen lily
        mode http
        bind :3000 ssl crt /etc/haproxy/celestial.moe.pem
        server lily lily-nvidia:3000

listen lily-mc
        mode tcp
        bind :25567
        server lily-mc lily-nvidia:25565
